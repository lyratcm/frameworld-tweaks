
building_giga_iodizium_research = {
	base_buildtime = 350
	category = research
	prerequisites = { "giga_tech_fusion_suppressor" }
	
	potential = {
		nor = { 
			has_modifier = resort_colony
			has_modifier = slave_colony
			has_modifier = gestation_colony
		}
	}

	destroy_trigger = {
		or = { 
			has_modifier = resort_colony
			has_modifier = slave_colony
			has_modifier = gestation_colony
		}
	}

	allow = { 
		has_upgraded_capital = yes 
		hidden_trigger = {
			exists = owner
			or = {
				owner = { is_ai = no }
				and = {
					planet_resource_compare = {
						resource = physics_research
						value >= 50
					}
				}
			}
		}
	}

	building_sets = {
		research
	}
	
	triggered_planet_modifier = {
		potential = { always = yes }
		multiplier = value:giga_job_scaling_plus_base
		planet_biol
		planet_physicists_physics_research_produces_add = 0.5
		planet_biologists_society_research_produces_add = 0.5
		planet_engineers_engineering_research_produces_add = 0.5
	}

	triggered_planet_modifier = {
		potential = { exists = owner owner = { is_gestalt = no } }
		multiplier = value:giga_job_scaling_plus_base
		planet_physicists_consumer_goods_upkeep_add = 1
		planet_biologists_consumer_goods_upkeep_add = 1
		planet_engineers_consumer_goods_upkeep_add = 1
	}

	triggered_planet_modifier = {
		potential = { exists = owner owner = { is_hive_empire = yes } }
		multiplier = value:giga_job_scaling_plus_base
		planet_physicists_minerals_upkeep_add = 3
		planet_biologists_minerals_upkeep_add = 3
		planet_engineers_minerals_upkeep_add = 3
	}

	triggered_planet_modifier = {
		potential = { exists = owner owner = { is_machine_empire = yes } }
		multiplier = value:giga_job_scaling_plus_base
		planet_physicists_energy_upkeep_add = 2
		planet_biologists_energy_upkeep_add = 2
		planet_engineers_energy_upkeep_add = 2
	}

	triggered_planet_modifier = {
		potential = { always = yes }
		multiplier = value:giga_job_scaling_plus_base
		planet_physicists_sr_iodizium_upkeep_add = 0.025
		planet_biologists_sr_iodizium_upkeep_add = 0.025
		planet_engineers_sr_iodizium_upkeep_add = 0.025
	}
	
	resources = {
		category = planet_buildings
		cost = { 
			minerals = 1000 
			sr_iodizium = 50
		}
		upkeep = {
			minerals = 20
			sr_iodizium = 1
		}
	}
	
	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 30
			}
		}
		physics_research = 20
		society_research = 20
		engineering_research = 20
	}
}

#scaled to vanilla for now, will defiantly need to be nerfed when vanilla get around to it
# Prototype Energy Anti-Transmuter
building_negative_mass_factory_1 = {
	base_buildtime = @b4_time
	category = manufacturing
	
	upgrades = {
		building_negative_mass_factory_2
	}
	
	prerequisites = {
		"tech_nm_utilization_1"
	}

	building_sets = {
		urban
	}
	
	potential = {
		nor = { 
			has_modifier = resort_colony
			has_modifier = slave_colony
			has_modifier = gestation_colony
		}
	}

	destroy_trigger = {
		or = { 
			has_modifier = resort_colony
			has_modifier = slave_colony
			has_modifier = gestation_colony
		}
	}
	
	allow = {
		has_upgraded_capital = yes
	}

	planet_modifier = {
		planet_metallurgists_ehof_sr_negative_mass_produces_add = 1
		planet_artisans_ehof_sr_negative_mass_produces_add = 1
		planet_metallurgists_energy_upkeep_add = 1.6
		planet_artisans_energy_upkeep_add = 1.6
	}

	# triggered_planet_modifier = { potential = { exists = owner owner = { is_hive_empire = yes } }		modifier = { job_ehof_energy_converter_drone_add = @b1_jobs } }
	# triggered_planet_modifier = { potential = { exists = owner owner = { is_machine_empire = yes } }	modifier = { job_ehof_energy_converter_drone_add = @b1_jobs } }
	# triggered_planet_modifier = { potential = { exists = owner owner = { is_regular_empire = yes } }	modifier = { job_ehof_energy_converter_add = @b1_jobs } }
	#
	# triggered_desc = { trigger = { exists = owner owner = { is_hive_empire = yes } }	text = job_ehof_energy_converter_drone_effect_desc }
	# triggered_desc = { trigger = { exists = owner owner = { is_machine_empire = yes } }	text = job_ehof_energy_converter_drone_effect_desc }
	# triggered_desc = { trigger = { exists = owner owner = { is_regular_empire = yes } }	text = job_ehof_energy_converter_effect_desc }
	
	resources = {
		category = planet_buildings
		cost = {
			minerals = @b4_minerals
			exotic_gases = @b2_rare_cost
			rare_crystals = @b2_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
		}
	}
}

# Negative Mass Transmuter
building_negative_mass_factory_2 = {
	base_buildtime = 1000
	category = manufacturing
	can_build = no
	
	prerequisites = {
		"tech_nm_utilization_2"
	}

	building_sets = {
		urban
	}

	potential = {
		nor = { 
			has_modifier = resort_colony
			has_modifier = slave_colony
			has_modifier = gestation_colony
		}
	}

	destroy_trigger = {
		or = { 
			has_modifier = resort_colony
			has_modifier = slave_colony
			has_modifier = gestation_colony
		}
	}
	
	allow = {
		has_upgraded_capital = yes
	}

	planet_modifier = {
		planet_metallurgists_ehof_sr_negative_mass_produces_add = 1
		planet_artisans_ehof_sr_negative_mass_produces_add = 1
		planet_metallurgists_energy_upkeep_add = 1.6
		planet_artisans_energy_upkeep_add = 1.6
		planet_artisans_ehof_sr_negative_mass_produces_mult = 0.20
		planet_metallurgists_ehof_sr_negative_mass_produces_mult = 0.20
	}

	# triggered_planet_modifier = { potential = { exists = owner owner = { is_hive_empire = yes } }		modifier = { job_ehof_energy_converter_drone_add = @b2_jobs } }
	# triggered_planet_modifier = { potential = { exists = owner owner = { is_machine_empire = yes } }	modifier = { job_ehof_energy_converter_drone_add = @b2_jobs } }
	# triggered_planet_modifier = { potential = { exists = owner owner = { is_regular_empire = yes } }	modifier = { job_ehof_energy_converter_add = @b2_jobs } }
	#
	# triggered_desc = { trigger = { exists = owner owner = { is_hive_empire = yes } }	text = job_ehof_energy_converter_drone_effect_desc }
	# triggered_desc = { trigger = { exists = owner owner = { is_machine_empire = yes } }	text = job_ehof_energy_converter_drone_effect_desc }
	# triggered_desc = { trigger = { exists = owner owner = { is_regular_empire = yes } }	text = job_ehof_energy_converter_effect_desc }
	
	resources = {
		category = planet_buildings
		cost = {
			minerals = @b4_minerals
			exotic_gases = @b3_rare_cost
			rare_crystals = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
		}
	}
}